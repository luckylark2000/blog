# 临近提测，前端同时联调多个后端要怎么配置项目

## 背景

开发人员组成
前端：1
后端：3
项目很多任务临近提测，就我一个前端，多个后端，时间紧任务重，工作过的朋友都知道，联调的时候经常会发生接口有问题，问题抛给后端，前端暂停，导致联调时间过长（前端摸鱼时间）。

但是如果着急提测的话，为了提升效率，就需要同时联调多个后端，这样的话，每当接口有问题的时候，就把相应的问题抛给后端，转而找另一个后端联调其他模块功能，这样，前端联调后端的效率就大大提高，特殊时间，特殊手段。

下面直接上解决方案

## 解决方案

使用环境变量的方式，几个关键步骤：

根目录下创建.env文件，里面写上公共的环境变量，比如 `BASE_URL` 之类的，想要git忽略的话，可以把文件名改为`.env.local`。

为每一个后端穿件在根目录下新建一个`.env.xxx.local`文件，比如`.env.zhangsan.local`，这里面写上私有的环境变量，比如后端的联调地址，联调端口号等。这里有两个关键点：

- zhangsan的意思是：该文件中的所有环境变量只会在zhangsan这个环境下生效
- local的意思是：这个文件只对本地开发生效，`git` 不会跟踪这个文件，所以不会被提交到`git`仓库中。

需要注意的是：有些框架如果要自定义环境变量的话需要有默认的前缀标识，比如`vue cli` 默认只识别带有`VUE_APP_`开头的环境变量，`Vite`默认只识别带有`VITE_APP_`开头的环境变领等等，例如`VUE_APP_BACKEND_URL`。除了两个默认约定的环境变量，`NODE_ENV`，`BASE_URL`。

然后在package.json中的scripts添加以下代码：

```json
"dev:zhangsan": "vue-cli-service serve --mode zhangsan",
"dev:lisi": "vue-cli-service serve --mode lisi",
```

package.json 一般在项目开发中除了添加包之外，是不不提交到仓库的，需要注意一下这些配置不要提交到仓库。

## 我自己的配置

就是每一个后端一个环境，环境名对应后端人员的名字；
开发服一个环境，经常自己修未提测的bug用；
测试服一个环境，用来修bug用。
